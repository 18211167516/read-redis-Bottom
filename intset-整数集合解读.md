## 前言：redis数据结构 intset解读
1. intset定义
```
typedef struct intset{
    //编码方式
    uint32_t encoding;
    //集合包含的元素数量
    uint32_t length;
    //保存元素的数组
    int8_t contents[];
}
```
2. 升级机制
 * 2.1 当新增元素到整数集合中时，如果新元素的类型比现有的所有的元素类型都要长时，整数集合需要先升级，然后在添加新元素
 * 2.2 步骤1：根据新元素的类型，扩展整数集合底层数组的空间大小，并为新元素分配空间
 * 2.3 步骤2：将底层数组现有的所有元素都转换成新类型，并放置到正确的位置上，在放置的过程中，维持底层数组的有序性质
 * 2.4 步骤3：将新元素添加到底层数组里面
3. 降级
```
没有降级的机制
```
4. 应用
```
集合键，当一个集合只包含整数值元素，并且这个集合的元素数量不多时，会使用整数集合作为集合键的底层实现
```
